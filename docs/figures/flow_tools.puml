@startuml

skinparam rectangle {
	BackgroundColor DarkSeaGreen
	FontStyle Bold
	FontColor DarkGreen
}

:User: as developer
rectangle "Alpine Bom Resolver"  as tool_resolver
rectangle "Alpine Bom Resolver"  as post_tool_resolver
rectangle "Alpine Base OS builder"  as builder
rectangle "Alpine Bom Resolver"  as resolver
rectangle "Alpine Base OS builder"  as tool_builder


database "Package Repository"  as apkindex
database "Internal Package Repository"  as tool_apkindex
database "Internal Package Repository"  as internal_apkindex
database "Aports Repository"  as aports
database "Trusted source"  as src

(Base OS Image) as container_image
(Builder for Base OS Image) as tool_container_image

note as setting
	Settings
end note

note as tool_setting
	Autogenerated Settings for tools
end note

note as desired
        Desired Bill of Material
end note

note as tool_desired
        Autogenerated Bill of Material for tools
end note

note as resolved
        Resolved Bill of Material
end note

note as complete
        Complete Bill of Material for product
end note

note as tool_complete
        Complete Bill of Material for tools
end note

note as apk_tar
        Alpine package index 
end note

note as presolved
        Resolved SBOM for Product 
end note

setting =down=> builder
desired =down=> builder


developer =down=> desired
developer =down=> setting
builder =left=> container_image
builder <=right= apkindex
builder =down=> resolved
builder =down=> apk_tar
resolved  =down=> resolver
apk_tar  =down=> resolver
desired =down=>  resolver
resolver <=right= aports
resolver <=down=> complete
complete <=down=> tool_resolver
tool_resolver =down=> tool_desired
tool_resolver =down=> tool_setting
tool_resolver =down=> presolved
presolved =down=> tool_container_image

tool_setting =down=> tool_builder
tool_desired =down=> tool_builder
tool_builder =left=> tool_container_image
tool_builder <=right= tool_apkindex
tool_container_image =left=> internal_apkindex
src =up=> tool_container_image
tool_builder =down=> post_tool_resolver
post_tool_resolver  =down=> tool_complete
@enduml
